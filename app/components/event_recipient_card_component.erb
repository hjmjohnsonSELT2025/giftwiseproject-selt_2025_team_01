<div class="bg-white rounded-2xl shadow p-4 mb-4">

  <div class="flex justify-between items-center mb-2">
    <h3 class="text-lg font-medium text-gray-800"><%= @recipient.name %></h3>

    <%= button_to "Remove",
                  remove_recipient_event_path(@event, recipient_id: @recipient.id),
                  method: :delete,
                  data: { confirm: "Remove #{@recipient.name} from this event?" },
                  class: "text-red-500 text-sm" %>
  </div>

  <div class="pl-4">
    <%= link_to "Add Gift",
                new_event_recipient_gift_idea_path(@event, @recipient),
                class: "text-sm text-indigo-600 font-medium" %>

    <ul class="mt-2 space-y-2">
      <% @event_recipient.event_recipient_gift_ideas.each do |gift| %>
        <li class="text-gray-700">
          <strong><%= gift.title %></strong>
          <%= link_to "Edit", edit_event_recipient_gift_idea_path(@event, @recipient, gift),
                      class: "text-sm text-blue-500 ml-2" %>
          <%= link_to "Delete", event_recipient_gift_idea_path(@event, @recipient, gift),
                      data: { turbo_method: :delete, confirm: "Delete this gift idea?" },
                      class: "text-sm text-red-500 ml-1" %>

          <% if gift.url.present? %>
            <span class="ml-2">â€” <%= link_to "Link", gift.url, target: "_blank", class: "text-sm text-indigo-500" %></span>
          <% end %>

          <% if gift.notes.present? %>
            <div class="text-sm text-gray-500"><em><%= gift.notes %></em></div>
          <% end %>
        </li>
      <% end %>
    </ul>
  </div>
</div>
