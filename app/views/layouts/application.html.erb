<! DOCTYPE html>
<html>
<head>
  <title>GiftWise</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <%= csrf_meta_tags %>
  <%= csp_meta_tag %>
  <%= stylesheet_link_tag "tailwind", "data-turbo-track": "reload" %>
  <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
  <%= javascript_importmap_tags %>
</head>

<body class="bg-[#fef8f9] font-sans text-gray-800 min-h-screen flex flex-col">
<!-- Header -->
<% if current_user %>
  <header class="bg-white shadow-sm border-b border-gray-100 py-4 px-6">
    <div class="max-w-6xl mx-auto flex justify-between items-center">
      <!-- Left side:  Logo and Welcome -->
      <div class="flex items-center gap-4">
        <!-- Gift Icon Logo -->
        <div class="w-12 h-12 rounded-full bg-gradient-to-br from-[#ffb6b9] to-[#fd79a8] flex items-center justify-center shadow-md">
          <svg width="24" height="24" fill="none" viewBox="0 0 24 24" stroke="white" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
            <rect x="3" y="8" width="18" height="4" rx="1"></rect>
            <path d="M12 8v13"></path>
            <path d="M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7"></path>
            <path d="M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5"></path>
          </svg>
        </div>
        <!-- Welcome text -->
        <div>
          <h1 class="text-lg font-bold text-gray-800">Giftwise </h1>
          <p class="text-sm text-gray-400"><%= current_user.email %></p>
        </div>
      </div>

      <!-- Right side: Navigation buttons -->
      <nav class="flex items-center gap-3">
        <%= link_to recipients_path, class: "flex items-center gap-2 px-4 py-2 rounded-lg text-gray-500 hover:bg-gray-50 transition-all duration-200 text-sm font-medium" do %>
          <svg width="20" height="20" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <rect x="3" y="8" width="18" height="4" rx="1"></rect>
            <path d="M12 8v13"></path>
            <path d="M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7"></path>
            <path d="M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5"></path>
          </svg>
          Recipients
        <% end %>

        <%= link_to events_path, class: "flex items-center gap-2 px-4 py-2 rounded-lg bg-gradient-to-r from-[#b6b9ff] to-[#a879fd] text-white hover:shadow-md transition-all duration-200 text-sm font-semibold" do %>
          <svg width="20" height="20" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
            <line x1="16" y1="2" x2="16" y2="6"></line>
            <line x1="8" y1="2" x2="8" y2="6"></line>
            <line x1="3" y1="10" x2="21" y2="10"></line>
          </svg>
          Events
        <% end %>

        <% if current_user.profile %>
          <%= link_to profile_path(current_user.profile), class: "flex items-center gap-2 px-4 py-2 rounded-lg bg-gradient-to-r from-[#b6b9ff] to-[#a879fd] text-white hover:shadow-md transition-all duration-200 text-sm font-semibold" do %>
            <svg width="20" height="20" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
              <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
              <line x1="16" y1="2" x2="16" y2="6"></line>
              <line x1="8" y1="2" x2="8" y2="6"></line>
              <line x1="3" y1="10" x2="21" y2="10"></line>
            </svg>
            Profile
          <% end %>
        <% end %>

        <%= link_to logout_path, method: :delete,
                    data: { turbo_method: :delete, confirm:  "Are you sure you want to log out?" },
                    class: "flex items-center gap-2 px-4 py-2 rounded-lg text-gray-500 hover:bg-gray-50 transition-all duration-200 text-sm font-medium" do %>
          <svg width="20" height="20" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1" />
          </svg>
          Log Out
        <% end %>
      </nav>
    </div>
  </header>
<% else %>
  <!-- Empty header for non-logged in users -->
  <header>
  </header>
<% end %>

<!-- Flash messages -->
<div class="max-w-6xl mx-auto mt-4 px-4">
  <% flash.each do |type, message| %>
    <div class="mb-2 px-4 py-2 rounded-lg
                    <%= type == 'notice' ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800' %>">
      <%= message %>
    </div>
  <% end %>
</div>

<!-- Main content -->
<main class="flex-grow w-full">
  <%= yield %>
</main>

<!-- Footer -->
<footer class="bg-white shadow-sm border-t border-gray-100 p-4 mt-10 text-center text-sm text-gray-400">
  Â© 2025 GiftWise
</footer>
</body>
</html>